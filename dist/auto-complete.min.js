!function(e,n){function t(e,n){n.parentNode.insertBefore(e,n.nextSibling)}function i(e){var t=n.createElement("div");t.innerHTML=e;var i=t.firstChild;return i}function o(){var e=(n.createElement("div"),'<div class="ac widget">  <span class="ac tags">  </span>  <div class="ac input">    <input class="ac text-field" type="text">    <div class="ac menu">    </div>  </div></div>');return i(e)}function r(e){var n='<span class="ac tag">'+e+'<span class="ac rm">&times</span></span>';return i(n)}function a(e){var n='<div class="ac menu-item">'+e+"</div>";return i(n)}function u(e,n){-1===e.className.indexOf(n)&&(e.className+=" "+n)}function c(e,n){-1!==e.className.indexOf(n)&&(e.className=e.className.replace(n,"").trim())}function d(e,n){if(!n||!Array.isArray(n))throw"Data should be an array of string";if("INPUT"!==e.tagName)throw"AutoComplete can only bind to an input element";l.use("Widget",function(t){t(e,n)})}var l=function(){function e(){o={}}function n(e){if("undefined"==typeof o[e])throw"module `"+e+"` is not defined";return o[e]}function t(e,t){var i;Array.isArray(t)?(i=t.pop(),o[e]=i.apply(i,t.map(n))):(i=t,o[e]=i())}function i(){var e=Array.prototype.slice.call(arguments),t=e.pop(),i=e.map(n);t.apply(t,i)}var o={};return{reset:e,module:t,use:i}}();l.module("TextField",function(){return function(e){function n(){return 0===arguments.length?e.value:e.value=arguments[0]}return{value:n,clear:function(){e.value=""}}}}),l.module("Tags",function(){return function(e,n){function t(e){return function(n){return n.text===e}}function i(i){if(!u.some(t(i))){var a=r(i);a.querySelector(".ac.rm").onclick=function(e){o(i),n(e)},e.insertBefore(a,c),u.push({text:i,elem:a})}}function o(n){if(u.some(t(n))){var i=u.filter(t(n))[0];e.removeChild(i.elem),u.splice(u.indexOf(i),1)}}function a(){return u.map(function(e){return e.text})}var u=[],c=e.querySelector(".ac.input");return{add:i,remove:o,data:a}}}),l.module("Menu",function(){return function(e,n,t){function i(){u(e,"hide")}function o(){c(e,"hide")}function r(i){d(),n.filter(function(e){return-1!==e.search(new RegExp(i,"i"))}).slice(0,6).map(a).map(function(n){n.onclick=t,n.onmouseover=function(){h&&f(),s(n)},n.onmouseout=function(){f()},e.appendChild(n)}),h=null}function d(){for(;e.firstChild;)e.removeChild(e.firstChild)}function l(){return e.hasChildNodes()}function s(e){u(e,"focus"),h=e}function f(){c(h,"focus"),h=null}function p(){if(!h)return s(e.firstChild),void 0;if(h.nextSibling){var n=h.nextSibling;return f(),s(n),void 0}}function m(){if(h&&!h.previousSibling)return f(),void 0;if(h&&h.previousSibling){var e=h.previousSibling;return f(),s(e),void 0}}function v(){return!!h}function x(){return h.innerText}var h;return{hide:i,show:o,update:r,hasItems:l,focusDown:p,focusUp:m,hasFocusedItem:v,focusedItemText:x}}}),l.module("Widget",["TextField","Tags","Menu",function(e,n,i){return function(r,a){function u(){x.value(g.data().join(","))}function c(){u()}function d(e){g.add(e),u(),y.hide(),h.clear(),m.focus()}function l(e){d(e.target.innerText)}function s(e){var n=e.target.value;if(""===n)return y.hide(),void 0;var t=13,i=38,o=40,r=e.keyCode;return r===o?(y.focusDown(),void 0):r===i?(y.focusUp(),void 0):r===t?(y.hasFocusedItem()&&d(y.focusedItemText()),void 0):(y.update(n),y.hasItems()?y.show():y.hide(),void 0)}var f=o(),p=f.querySelector(".ac.menu"),m=f.querySelector(".ac.text-field"),v=f.querySelector(".ac.tags"),x=e(r),h=e(m),g=n(v,c),y=i(p,a,l);return r.type="hidden",t(f,r),y.hide(),m.onkeyup=s,{}}}]),function(){var e=n.head,t=n.createElement("style"),i=".ac.widget{border-radius:4px;border:1px solid #CCC;padding:3px 0 4px 5px;background-color:#FFF;text-align:left}.ac.tag{background-color:#EEE;border-radius:3px;border:1px solid #CCC;padding:1px 0 1px 4px;margin:2px 4px 2px 0;display:inline-block}.ac.tag.focus{background-color:#FEFBC6}.ac.rm{font-size:20px;font-weight:700;line-height:18px;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20);text-decoration:none;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif}.ac.rm:hover{opacity:.4;filter:alpha(opacity=40);cursor:pointer}.ac.input{display:inline-block;position:relative}.ac.text-field{border:none;font-size:16px;width:100%}.ac.text-field:focus{outline:0}.ac.menu{display:inline-block;border-radius:6px;border:1px solid #CCC;padding:4px 0;position:absolute;left:2px;top:22px;background-color:#fff;z-index:2000}.ac.menu-item{padding:4px 8px;text-align:left}.ac.menu-item.focus{Background-color:#DDD}.ac.hide{display:none}";t.type="text/css",t.appendChild(n.createTextNode(i)),e.appendChild(t)}();var s=e.AutoComplete||(e.AutoComplete={});s.bind=d}(window,document);