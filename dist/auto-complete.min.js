!function(e,n){function t(e,n){n.parentNode.insertBefore(e,n.nextSibling)}function i(e){var t=n.createElement("div");t.innerHTML=e;var i=t.firstChild;return i}function a(){var e=(n.createElement("div"),'<div class="ac widget">  <span class="ac tags">  </span>  <div class="ac input">    <input class="ac text-field" type="text">    <div class="ac menu">    </div>  </div></div>');return i(e)}function r(e){var n='<span class="ac tag">'+e+'<span class="ac rm">&times</span></span>';return i(n)}function o(e){var n='<div class="ac menu-item">'+e+"</div>";return i(n)}function c(e,n){-1===e.className.indexOf(n)&&(e.className+=" "+n)}function u(e,n){-1!==e.className.indexOf(n)&&(e.className=e.className.replace(n,"").trim())}function l(e,n){if(!n||!Array.isArray(n))throw"Data should be an array of string";if("INPUT"!==e.tagName)throw"AutoComplete can only bind to an input element";d.use("Widget",function(t){t(e,n)})}var d=function(){function e(){a={}}function n(e){if("undefined"==typeof a[e])throw"module `"+e+"` is not defined";return a[e]}function t(e,t){var i;Array.isArray(t)?(i=t.pop(),a[e]=i.apply(i,t.map(n))):(i=t,a[e]=i())}function i(){var e=Array.prototype.slice.call(arguments),t=e.pop(),i=e.map(n);t.apply(t,i)}var a={};return{reset:e,module:t,use:i}}();d.module("TextField",function(){return function(e){function n(){return 0===arguments.length?e.value:e.value=arguments[0]}return{value:n,clear:function(){e.value=""}}}}),d.module("Tags",function(){return function(e,n){function t(e){return function(n){return n.text===e}}function i(i){if(!c.some(t(i))){var o=r(i);o.querySelector(".ac.rm").onclick=function(e){a(i),n(e)},e.insertBefore(o,u),c.push({text:i,elem:o})}}function a(n){if(c.some(t(n))){var i=c.filter(t(n))[0];e.removeChild(i.elem),c.splice(c.indexOf(i),1)}}function o(){return c.map(function(e){return e.text})}var c=[],u=e.querySelector(".ac.input");return{add:i,remove:a,data:o}}}),d.module("Menu",function(){return function(e,n,t){function i(){c(e,"hide")}function a(){u(e,"hide")}function r(i){l(),n.filter(function(e){return-1!==e.search(new RegExp(i,"i"))}).slice(0,6).map(o).map(function(n){n.onclick=t,e.appendChild(n)})}function l(){for(;e.firstChild;)e.removeChild(e.firstChild)}function d(){return e.hasChildNodes()}return{hide:i,show:a,update:r,hasItems:d}}}),d.module("Widget",["TextField","Tags","Menu",function(e,n,i){return function(r,o){function c(){x.value(v.data().join(","))}function u(){c()}function l(e){v.add(e.target.innerText),c(),g.hide(),h.clear(),f.focus()}function d(e){var n=e.target.value;""===n?g.hide():(g.update(n),g.hasItems()?g.show():g.hide())}var s=a(),p=s.querySelector(".ac.menu"),f=s.querySelector(".ac.text-field"),m=s.querySelector(".ac.tags"),x=e(r),h=e(f),v=n(m,u),g=i(p,o,l);return r.type="hidden",t(s,r),g.hide(),f.onkeyup=d,{}}}]),function(){var e=n.head,t=n.createElement("style"),i=".ac.widget{border-radius:4px;border:1px solid #CCC;padding:3px 0 4px 5px;background-color:#FFF;text-align:left}.ac.tag{background-color:#EEE;border-radius:3px;border:1px solid #CCC;padding:1px 0 1px 4px;margin:2px 4px 2px 0;display:inline-block}.ac.tag.focus{background-color:#FEFBC6}.ac.rm{font-size:20px;font-weight:700;line-height:18px;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20);text-decoration:none;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif}.ac.rm:hover{opacity:.4;filter:alpha(opacity=40);cursor:pointer}.ac.input{display:inline-block;position:relative}.ac.text-field{border:none;font-size:16px;width:100%}.ac.text-field:focus{outline:0}.ac.menu{display:inline-block;border-radius:6px;border:1px solid #CCC;padding:4px 0;position:absolute;left:2px;top:22px;background-color:#fff;z-index:2000}.ac.menu-item{padding:4px 8px;text-align:left}.ac.menu-item:hover{Background-color:#DDD}.ac.hide{display:none}";t.type="text/css",t.appendChild(n.createTextNode(i)),e.appendChild(t)}();var s=e.AutoComplete||(e.AutoComplete={});s.bind=l}(window,document);